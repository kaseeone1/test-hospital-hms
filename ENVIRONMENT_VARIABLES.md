# Environment Variables for Hospital Management System

This document explains all environment variables used in the Hospital Management System deployment.

## Required Environment Variables

### Core Application Variables

| Variable | Description | Default Value | Required |
|----------|-------------|---------------|----------|
| `SECRET_KEY` | Flask secret key for session management | Auto-generated | ✅ Yes |
| `DATABASE_URL` | Database connection string | SQLite local | ✅ Yes |
| `FLASK_ENV` | Flask environment mode | `production` | ✅ Yes |
| `PORT` | Port number for the application | `10000` | ✅ Yes |

### Security Variables

| Variable | Description | Default Value | Required |
|----------|-------------|---------------|----------|
| `SESSION_SECRET` | Session encryption secret | Auto-generated | ✅ Yes |
| `DEBUG` | Enable debug mode | `false` | ❌ No |
| `FLASK_DEBUG` | Flask debug mode | `0` | ❌ No |

### Database Variables

| Variable | Description | Default Value | Required |
|----------|-------------|---------------|----------|
| `DATABASE_URL` | PostgreSQL connection string | Auto-provided by Render | ✅ Yes |

### Python Environment

| Variable | Description | Default Value | Required |
|----------|-------------|---------------|----------|
| `PYTHON_VERSION` | Python version to use | `3.12.0` | ✅ Yes |
| `FLASK_APP` | Flask application entry point | `app.py` | ✅ Yes |

## Render-Specific Configuration

### Automatic Variables (Set by Render)
- `DATABASE_URL` - Automatically provided when you create a PostgreSQL database
- `SECRET_KEY` - Automatically generated by Render
- `SESSION_SECRET` - Automatically generated by Render

### Manual Configuration (Optional)
- `DEBUG` - Set to `true` for development debugging
- `FLASK_DEBUG` - Set to `1` for Flask debug mode

## Environment Variable Setup in Render

### Method 1: Using render.yaml (Recommended)
The `render.yaml` file automatically configures these variables:

```yaml
envVars:
  - key: PYTHON_VERSION
    value: 3.12.0
  - key: FLASK_ENV
    value: production
  - key: SECRET_KEY
    generateValue: true
  - key: DATABASE_URL
    fromDatabase:
      name: bluwik-hms-db
      property: connectionString
  - key: DEBUG
    value: false
  - key: PORT
    value: 10000
  - key: SESSION_SECRET
    generateValue: true
  - key: FLASK_APP
    value: app.py
  - key: FLASK_DEBUG
    value: 0
```

### Method 2: Manual Setup in Render Dashboard

1. Go to your Render service dashboard
2. Navigate to "Environment" tab
3. Add the following variables:

| Key | Value | Description |
|-----|-------|-------------|
| `SECRET_KEY` | (Auto-generated) | Flask secret key |
| `DATABASE_URL` | (Auto-provided) | Database connection |
| `FLASK_ENV` | `production` | Production environment |
| `PORT` | `10000` | Application port |
| `DEBUG` | `false` | Debug mode disabled |
| `FLASK_DEBUG` | `0` | Flask debug disabled |

## Security Considerations

### Production Environment
- `DEBUG` should always be `false` in production
- `FLASK_DEBUG` should always be `0` in production
- `SECRET_KEY` should be a strong, randomly generated string
- `SESSION_SECRET` should be different from `SECRET_KEY`

### Development Environment
- Set `DEBUG=true` for development debugging
- Set `FLASK_DEBUG=1` for Flask debug mode
- Use local SQLite database for development

## Database Configuration

### PostgreSQL (Production - Render)
```bash
DATABASE_URL=postgresql://username:password@host:port/database
```

### SQLite (Development)
```bash
DATABASE_URL=sqlite:///instance/bluwik_hms.db
```

## Troubleshooting

### Common Issues

1. **Database Connection Error**
   - Check if `DATABASE_URL` is properly set
   - Verify PostgreSQL database is created in Render

2. **Secret Key Error**
   - Ensure `SECRET_KEY` is set and not empty
   - Check if `SESSION_SECRET` is properly configured

3. **Port Binding Error**
   - Verify `PORT` is set to `10000` (Render's default)
   - Check if port is not already in use

4. **Debug Mode Issues**
   - Set `DEBUG=false` and `FLASK_DEBUG=0` for production
   - Enable only for development/testing

### Validation Commands

Test your environment variables:
```bash
# Check if variables are set
echo $SECRET_KEY
echo $DATABASE_URL
echo $FLASK_ENV

# Test database connection
python -c "import os; print(os.environ.get('DATABASE_URL'))"
```

## Best Practices

1. **Never commit secrets to version control**
2. **Use different secrets for different environments**
3. **Rotate secrets regularly in production**
4. **Monitor environment variable usage**
5. **Document all custom environment variables**
6. **Use strong, randomly generated secrets**
7. **Limit access to production environment variables**

## Local Development Setup

For local development, create a `.env` file:

```bash
# .env (DO NOT COMMIT THIS FILE)
SECRET_KEY=your-local-secret-key
DATABASE_URL=sqlite:///instance/bluwik_hms.db
FLASK_ENV=development
DEBUG=true
FLASK_DEBUG=1
PORT=5000
```

Remember to add `.env` to your `.gitignore` file! 